clone_depth: 50
image: Visual Studio 2017
environment:
  RUSTUP_USE_REQWEST: 1
  CARGO_HTTP_CHECK_REVOKE: false
  matrix:
    - TARGET: x86_64-pc-windows-msvc
skip_commits:
  files:
    - .gitattributes
    - .gitignore
    - .travis.yml
    - .ci\*.sh
    - LICENSE
    - '*.md'
platform:
  - x64
install:
  # Install Rust
  - appveyor DownloadFile https://win.rustup.rs/ -FileName rustup-init.exe
  - rustup-init.exe -y --default-host %TARGET%
  - set PATH=%PATH%;C:\Users\appveyor\.cargo\bin
  - rustc -V
  - cargo -V
build_script:
  - cargo build -vv --no-default-features
test_script:
  - cargo test -vv --no-default-features
cache:
  - '%USERPROFILE%\.cargo\registry'
  - artifacts\vc14\include -> build.rs		
  - artifacts\vc14\x64 -> build.rs	
